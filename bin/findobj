#!/usr/bin/env ksh
usage=$'[-1?1s1]
[+NAME?findobj - Find objects.]
[+DESCRIPTION?\bFind objects...\b....]
[n:nopol?Find no polarization standards.]
\ndirectory containing ordinary/extraordinaryp\n
[+EXIT VALUES]{
  [+0?Success.]
  [+1?Failure.]}
[+EXAMPLES]{ 
  [+findobj .? example]}'
    
while	getopts "$usage" option
do
  case "${option}"
  in
    n) nflag=1;;
  esac
done
shift $(( OPTIND-1 ))
    
nopol="hd432
hd9540
hd10476
hd18803
hd20630
hd38393
hd39587
hd42807
hd61421
hd65583
hd90508
hd98281
hd100623
hd102438
hd102870
hd114710
hd115617
hd125184
hd142373
hd144287
hd144579
hd154345
hd165908
hd185395
hd188512
hd202573
hd202940
hd210027
hd216956"

nopol="$nopol
zetapeg"

nopol="$nopol
HD12021
HD14069
HD21447
G191B2B 
HD64299
HD94851
GD319
BDp332642
HD154892
BDp32_3739
BDp28_4211
HD212311"

origin=$1
objlist=$(ls -d *ordinary/*/* | grep -v "flat\|dark")

objects=""
standards=""
for i in $objlist
do
    curobj=$(basename $i)
    if [ -z $(echo "$objects" |grep $curobj) ];then
        objects="$objects $curobj"
        if [ ! -z $(echo "$nopol" |grep $curobj) ];then
            standards="$standards $curobj"
        fi
    fi
done

echo "OBJECTS: "
if [ -z "$objects" ]; then
    echo "No objects were found in the directory structure."
    exit 0
else
    for i in $objects; do echo "  - $i"; done
fi
echo ""

if [ ! -z "$nflag" ]; then
    echo "STANDARDS: "
    if [ -z "$standards" ]; then
        echo "No polarization standard in the list of objects"
    else
        for i in $standards; do echo "  - $i"; done
    fi
fi

exit 0